{"version":3,"sources":["export_renderers.coffee"],"names":[],"mappings":"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","file":"export_renderers.js","sourceRoot":"/source/","sourcesContent":["callWithJQuery = (pivotModule) ->\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\n        pivotModule require(\"jquery\")\n    else if typeof define is \"function\" and define.amd # AMD\n        define [\"jquery\"], pivotModule\n    # Plain browser env\n    else\n        pivotModule jQuery\n        \ncallWithJQuery ($) ->\n\n    $.pivotUtilities.export_renderers = \"TSV Export\": (pivotData, opts) ->\n        defaults =\n            localeStrings: {}\n\n        opts = $.extend defaults, opts\n\n        rowKeys = pivotData.getRowKeys()\n        rowKeys.push [] if rowKeys.length == 0\n        colKeys = pivotData.getColKeys()\n        colKeys.push [] if colKeys.length == 0\n        rowAttrs = pivotData.rowAttrs\n        colAttrs = pivotData.colAttrs\n\n        result = []\n\n        row = []\n        for rowAttr in rowAttrs\n            row.push rowAttr\n        if colKeys.length == 1 and colKeys[0].length == 0\n            row.push pivotData.aggregatorName\n        else\n            for colKey in colKeys\n                row.push colKey.join(\"-\")\n\n        result.push row\n\n        for rowKey in rowKeys\n            row = []\n            for r in rowKey\n                row.push r\n\n            for colKey in colKeys\n                agg = pivotData.getAggregator(rowKey, colKey)\n                if agg.value()?\n                    row.push agg.value()\n                else\n                    row.push \"\"\n            result.push row\n        text = \"\"\n        for r in result\n            text += r.join(\"\\t\")+\"\\n\"\n        \n        return $(\"<textarea>\").text(text).css(\n                width: ($(window).width() / 2) + \"px\", \n                height: ($(window).height() / 2) + \"px\")\n    \n"]}