{"version":3,"sources":["c3_renderers.coffee","c3_renderers.min.js"],"names":["callWithJQuery","pivotModule","exports","module","require","define","amd","jQuery","c3","$","makeC3Chart","chartOpts","pivotData","opts","agg","attrs","base","base1","base2","base3","base4","c","categories","colKey","colKeys","columns","dataColumns","defaults","formatter","fullAggName","groupByTitle","h","hAxisTitle","headers","i","j","k","l","len","len1","len2","len3","len4","m","numCharsInHAxis","numSeries","params","ref","ref1","ref2","ref3","renderArea","result","rotationAngle","row","rowHeader","rowKey","rowKeys","s","scatterData","series","title","titleText","vAxisTitle","val","vals","x","xs","y","localeStrings","vs","by","extend","type","horizontal","stacked","getRowKeys","length","push","getColKeys","results","join","aggregatorName","valAttrs","t","rowAttrs","concat","colAttrs","slice","getAggregator","value","parseFloat","isFinite","style","text","format","axis","rotated","label","tick","rotate","multiline","data","order","tooltip","grouped","color","pattern","fit","legend","show","name","a","b","d","e","ref4","v","len5","n","shift","unshift","rows","groups","appendTo","bindto","generate","detach","remove","append","pivotUtilities","c3_renderers","Horizontal Bar Chart","Horizontal Stacked Bar Chart","Bar Chart","Stacked Bar Chart","Line Chart","Area Chart","Scatter Chart","call","this"],"mappings":"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","file":"c3_renderers.min.js","sourcesContent":["callWithJQuery = (pivotModule) ->\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\n        pivotModule require(\"jquery\"), require(\"c3\")\n    else if typeof define is \"function\" and define.amd # AMD\n        define [\"jquery\", \"c3\"], pivotModule\n    # Plain browser env\n    else\n        pivotModule jQuery, c3\n\ncallWithJQuery ($, c3) ->\n\n    makeC3Chart = (chartOpts = {}) -> (pivotData, opts) ->\n        defaults =\n            localeStrings: {vs: \"vs\", by: \"by\"}\n            c3: {}\n\n        opts = $.extend(true, {}, defaults, opts)\n        chartOpts.type ?= \"line\"\n        chartOpts.horizontal ?= false\n        chartOpts.stacked ?= false\n\n        rowKeys = pivotData.getRowKeys()\n        rowKeys.push [] if rowKeys.length == 0\n        colKeys = pivotData.getColKeys()\n        colKeys.push [] if colKeys.length == 0\n\n        headers = (h.join(\"-\") for h in colKeys)\n        rotationAngle = 0\n\n        fullAggName = pivotData.aggregatorName\n        if pivotData.valAttrs.length\n            fullAggName += \"(#{pivotData.valAttrs.join(\", \")})\"\n\n        if chartOpts.type == \"scatter\"\n            scatterData = x:{}, y:{}, t:{}\n            attrs = pivotData.rowAttrs.concat(pivotData.colAttrs)\n            vAxisTitle = attrs[0] ? \"\"\n            hAxisTitle = attrs[1] ? \"\"\n            groupByTitle = attrs.slice(2).join(\"-\")\n            titleText = vAxisTitle\n            titleText += \" #{opts.localeStrings.vs} #{hAxisTitle}\" if hAxisTitle != \"\"\n            titleText += \" #{opts.localeStrings.by} #{groupByTitle}\" if groupByTitle != \"\"\n            for rowKey in rowKeys\n                for colKey in colKeys\n                    agg = pivotData.getAggregator(rowKey, colKey)\n                    if agg.value()?\n                        vals = rowKey.concat(colKey)\n                        series = vals.slice(2).join(\"-\")\n                        if series == \"\" then series = \"series\"\n                        scatterData.x[series] ?= []\n                        scatterData.y[series] ?= []\n                        y = vals[0] ? 0\n                        x = vals[1] ? 0\n                        scatterData.y[series].push y\n                        scatterData.x[series].push x\n                        scatterData.t[series] ?= {}\n                        scatterData.t[series][x] ?= {}\n                        scatterData.t[series][x][y] = agg.value()\n        else\n            numCharsInHAxis = 0\n            for x in headers\n                numCharsInHAxis += x.length\n            if numCharsInHAxis > 50\n                rotationAngle = 45\n\n            columns = []\n            for rowKey in rowKeys\n                rowHeader = rowKey.join(\"-\")\n                row = [if rowHeader == \"\" then fullAggName else rowHeader]\n                for colKey in colKeys\n                    val = parseFloat  pivotData.getAggregator(rowKey, colKey).value()\n                    if isFinite(val)\n                        row.push(val)\n                    else\n                        row.push(null)\n                columns.push row\n\n            vAxisTitle = fullAggName\n\n            if chartOpts.horizontal\n                hAxisTitle = pivotData.rowAttrs.join(\"-\")\n                groupByTitle = pivotData.colAttrs.join(\"-\")\n            else\n                hAxisTitle = pivotData.colAttrs.join(\"-\")\n                groupByTitle = pivotData.rowAttrs.join(\"-\")\n            titleText = fullAggName\n            titleText += \" #{opts.localeStrings.vs} #{hAxisTitle}\" if hAxisTitle != \"\"\n            titleText += \" #{opts.localeStrings.by} #{groupByTitle}\" if groupByTitle != \"\"\n\n        title = $(\"<p>\", {style: \"text-align: center; font-weight: bold\"})\n        title.text(titleText)\n\n        formatter = pivotData.getAggregator([], []).format\n\n        params =\n            axis:\n                rotated: chartOpts.horizontal\n                y:\n                    label: vAxisTitle\n                    tick: {}\n                x:\n                    label: hAxisTitle\n                    tick:\n                        rotate: rotationAngle\n                        multiline: false\n            data:\n                type: chartOpts.type\n                order: null\n            tooltip:\n                grouped: false\n            color:\n                pattern: [ \"#3366cc\", \"#dc3912\", \"#ff9900\", \"#109618\",\n                           \"#990099\", \"#0099c6\", \"#dd4477\", \"#66aa00\",\n                           \"#b82e2e\", \"#316395\", \"#994499\", \"#22aa99\",\n                           \"#aaaa11\", \"#6633cc\", \"#e67300\", \"#8b0707\",\n                           \"#651067\", \"#329262\", \"#5574a6\", \"#3b3eac\" ]\n\n\n        params = $.extend(true, {}, params, opts.c3)\n        if chartOpts.type == \"scatter\"\n            xs = {}\n            numSeries = 0\n            dataColumns = []\n            for s of scatterData.x\n                numSeries += 1\n                xs[s] = s+\"_x\"\n                dataColumns.push [s+\"_x\"].concat(scatterData.x[s])\n                dataColumns.push [s].concat(scatterData.y[s])\n            params.data.xs = xs\n            params.data.columns = dataColumns\n            params.axis.x.tick = fit: false\n            if numSeries == 1\n                params.legend = show: false\n            params.tooltip.format =\n                title: -> fullAggName\n                name: -> \"\"\n                value: (a,b,c,d,e) ->\n                    {name: series, value: y, x} = e[0]\n                    formatter(scatterData.t[series][x][y])\n        else\n            params.axis.x.type= 'category'\n            params.axis.y.tick.format ?= (v) -> formatter(v)\n            params.tooltip.format = value: (v) -> formatter(v)\n\n            if chartOpts.horizontal\n                categories = (c.shift() for c in columns)\n                if categories.length == 1 and categories[0] == fullAggName\n                    categories = [\"\"]\n                params.axis.x.categories = categories\n                if headers.length == 1 and headers[0] == \"\"\n                    headers = [fullAggName]\n                columns.unshift(headers)\n                params.data.rows = columns\n            else\n                params.axis.x.categories = headers\n                params.data.columns = columns\n\n\n        if chartOpts.stacked\n            if chartOpts.horizontal\n                params.data.groups = [x.join(\"-\") for x in colKeys]\n            else\n                params.data.groups = [x.join(\"-\") for x in rowKeys]\n\n        renderArea = $(\"<div>\", style: \"display:none;\").appendTo $(\"body\")\n        result = $(\"<div>\").appendTo renderArea\n        params.bindto = result[0]\n        c3.generate params\n        result.detach()\n        renderArea.remove()\n        return $(\"<div>\").append title, result\n\n    $.pivotUtilities.c3_renderers =\n        \"Horizontal Bar Chart\": makeC3Chart(type: \"bar\", horizontal: true)\n        \"Horizontal Stacked Bar Chart\": makeC3Chart(type: \"bar\", stacked: true, horizontal: true)\n        \"Bar Chart\": makeC3Chart(type: \"bar\")\n        \"Stacked Bar Chart\": makeC3Chart(type: \"bar\", stacked: true)\n        \"Line Chart\": makeC3Chart()\n        \"Area Chart\": makeC3Chart(type: \"area\", stacked: true)\n        \"Scatter Chart\": makeC3Chart(type: \"scatter\")\n","(function() {\n  var callWithJQuery;\n\n  callWithJQuery = function(pivotModule) {\n    if (typeof exports === \"object\" && typeof module === \"object\") {\n      return pivotModule(require(\"jquery\"), require(\"c3\"));\n    } else if (typeof define === \"function\" && define.amd) {\n      return define([\"jquery\", \"c3\"], pivotModule);\n    } else {\n      return pivotModule(jQuery, c3);\n    }\n  };\n\n  callWithJQuery(function($, c3) {\n    var makeC3Chart;\n    makeC3Chart = function(chartOpts) {\n      if (chartOpts == null) {\n        chartOpts = {};\n      }\n      return function(pivotData, opts) {\n        var agg, attrs, base, base1, base2, base3, base4, c, categories, colKey, colKeys, columns, dataColumns, defaults, formatter, fullAggName, groupByTitle, h, hAxisTitle, headers, i, j, k, l, len, len1, len2, len3, len4, m, numCharsInHAxis, numSeries, params, ref, ref1, ref2, ref3, renderArea, result, rotationAngle, row, rowHeader, rowKey, rowKeys, s, scatterData, series, title, titleText, vAxisTitle, val, vals, x, xs, y;\n        defaults = {\n          localeStrings: {\n            vs: \"vs\",\n            by: \"by\"\n          },\n          c3: {}\n        };\n        opts = $.extend(true, {}, defaults, opts);\n        if (chartOpts.type == null) {\n          chartOpts.type = \"line\";\n        }\n        if (chartOpts.horizontal == null) {\n          chartOpts.horizontal = false;\n        }\n        if (chartOpts.stacked == null) {\n          chartOpts.stacked = false;\n        }\n        rowKeys = pivotData.getRowKeys();\n        if (rowKeys.length === 0) {\n          rowKeys.push([]);\n        }\n        colKeys = pivotData.getColKeys();\n        if (colKeys.length === 0) {\n          colKeys.push([]);\n        }\n        headers = (function() {\n          var i, len, results;\n          results = [];\n          for (i = 0, len = colKeys.length; i < len; i++) {\n            h = colKeys[i];\n            results.push(h.join(\"-\"));\n          }\n          return results;\n        })();\n        rotationAngle = 0;\n        fullAggName = pivotData.aggregatorName;\n        if (pivotData.valAttrs.length) {\n          fullAggName += \"(\" + (pivotData.valAttrs.join(\", \")) + \")\";\n        }\n        if (chartOpts.type === \"scatter\") {\n          scatterData = {\n            x: {},\n            y: {},\n            t: {}\n          };\n          attrs = pivotData.rowAttrs.concat(pivotData.colAttrs);\n          vAxisTitle = (ref = attrs[0]) != null ? ref : \"\";\n          hAxisTitle = (ref1 = attrs[1]) != null ? ref1 : \"\";\n          groupByTitle = attrs.slice(2).join(\"-\");\n          titleText = vAxisTitle;\n          if (hAxisTitle !== \"\") {\n            titleText += \" \" + opts.localeStrings.vs + \" \" + hAxisTitle;\n          }\n          if (groupByTitle !== \"\") {\n            titleText += \" \" + opts.localeStrings.by + \" \" + groupByTitle;\n          }\n          for (i = 0, len = rowKeys.length; i < len; i++) {\n            rowKey = rowKeys[i];\n            for (j = 0, len1 = colKeys.length; j < len1; j++) {\n              colKey = colKeys[j];\n              agg = pivotData.getAggregator(rowKey, colKey);\n              if (agg.value() != null) {\n                vals = rowKey.concat(colKey);\n                series = vals.slice(2).join(\"-\");\n                if (series === \"\") {\n                  series = \"series\";\n                }\n                if ((base = scatterData.x)[series] == null) {\n                  base[series] = [];\n                }\n                if ((base1 = scatterData.y)[series] == null) {\n                  base1[series] = [];\n                }\n                y = (ref2 = vals[0]) != null ? ref2 : 0;\n                x = (ref3 = vals[1]) != null ? ref3 : 0;\n                scatterData.y[series].push(y);\n                scatterData.x[series].push(x);\n                if ((base2 = scatterData.t)[series] == null) {\n                  base2[series] = {};\n                }\n                if ((base3 = scatterData.t[series])[x] == null) {\n                  base3[x] = {};\n                }\n                scatterData.t[series][x][y] = agg.value();\n              }\n            }\n          }\n        } else {\n          numCharsInHAxis = 0;\n          for (k = 0, len2 = headers.length; k < len2; k++) {\n            x = headers[k];\n            numCharsInHAxis += x.length;\n          }\n          if (numCharsInHAxis > 50) {\n            rotationAngle = 45;\n          }\n          columns = [];\n          for (l = 0, len3 = rowKeys.length; l < len3; l++) {\n            rowKey = rowKeys[l];\n            rowHeader = rowKey.join(\"-\");\n            row = [rowHeader === \"\" ? fullAggName : rowHeader];\n            for (m = 0, len4 = colKeys.length; m < len4; m++) {\n              colKey = colKeys[m];\n              val = parseFloat(pivotData.getAggregator(rowKey, colKey).value());\n              if (isFinite(val)) {\n                row.push(val);\n              } else {\n                row.push(null);\n              }\n            }\n            columns.push(row);\n          }\n          vAxisTitle = fullAggName;\n          if (chartOpts.horizontal) {\n            hAxisTitle = pivotData.rowAttrs.join(\"-\");\n            groupByTitle = pivotData.colAttrs.join(\"-\");\n          } else {\n            hAxisTitle = pivotData.colAttrs.join(\"-\");\n            groupByTitle = pivotData.rowAttrs.join(\"-\");\n          }\n          titleText = fullAggName;\n          if (hAxisTitle !== \"\") {\n            titleText += \" \" + opts.localeStrings.vs + \" \" + hAxisTitle;\n          }\n          if (groupByTitle !== \"\") {\n            titleText += \" \" + opts.localeStrings.by + \" \" + groupByTitle;\n          }\n        }\n        title = $(\"<p>\", {\n          style: \"text-align: center; font-weight: bold\"\n        });\n        title.text(titleText);\n        formatter = pivotData.getAggregator([], []).format;\n        params = {\n          axis: {\n            rotated: chartOpts.horizontal,\n            y: {\n              label: vAxisTitle,\n              tick: {}\n            },\n            x: {\n              label: hAxisTitle,\n              tick: {\n                rotate: rotationAngle,\n                multiline: false\n              }\n            }\n          },\n          data: {\n            type: chartOpts.type,\n            order: null\n          },\n          tooltip: {\n            grouped: false\n          },\n          color: {\n            pattern: [\"#3366cc\", \"#dc3912\", \"#ff9900\", \"#109618\", \"#990099\", \"#0099c6\", \"#dd4477\", \"#66aa00\", \"#b82e2e\", \"#316395\", \"#994499\", \"#22aa99\", \"#aaaa11\", \"#6633cc\", \"#e67300\", \"#8b0707\", \"#651067\", \"#329262\", \"#5574a6\", \"#3b3eac\"]\n          }\n        };\n        params = $.extend(true, {}, params, opts.c3);\n        if (chartOpts.type === \"scatter\") {\n          xs = {};\n          numSeries = 0;\n          dataColumns = [];\n          for (s in scatterData.x) {\n            numSeries += 1;\n            xs[s] = s + \"_x\";\n            dataColumns.push([s + \"_x\"].concat(scatterData.x[s]));\n            dataColumns.push([s].concat(scatterData.y[s]));\n          }\n          params.data.xs = xs;\n          params.data.columns = dataColumns;\n          params.axis.x.tick = {\n            fit: false\n          };\n          if (numSeries === 1) {\n            params.legend = {\n              show: false\n            };\n          }\n          params.tooltip.format = {\n            title: function() {\n              return fullAggName;\n            },\n            name: function() {\n              return \"\";\n            },\n            value: function(a, b, c, d, e) {\n              var ref4;\n              ref4 = e[0], series = ref4.name, y = ref4.value, x = ref4.x;\n              return formatter(scatterData.t[series][x][y]);\n            }\n          };\n        } else {\n          params.axis.x.type = 'category';\n          if ((base4 = params.axis.y.tick).format == null) {\n            base4.format = function(v) {\n              return formatter(v);\n            };\n          }\n          params.tooltip.format = {\n            value: function(v) {\n              return formatter(v);\n            }\n          };\n          if (chartOpts.horizontal) {\n            categories = (function() {\n              var len5, n, results;\n              results = [];\n              for (n = 0, len5 = columns.length; n < len5; n++) {\n                c = columns[n];\n                results.push(c.shift());\n              }\n              return results;\n            })();\n            if (categories.length === 1 && categories[0] === fullAggName) {\n              categories = [\"\"];\n            }\n            params.axis.x.categories = categories;\n            if (headers.length === 1 && headers[0] === \"\") {\n              headers = [fullAggName];\n            }\n            columns.unshift(headers);\n            params.data.rows = columns;\n          } else {\n            params.axis.x.categories = headers;\n            params.data.columns = columns;\n          }\n        }\n        if (chartOpts.stacked) {\n          if (chartOpts.horizontal) {\n            params.data.groups = [\n              (function() {\n                var len5, n, results;\n                results = [];\n                for (n = 0, len5 = colKeys.length; n < len5; n++) {\n                  x = colKeys[n];\n                  results.push(x.join(\"-\"));\n                }\n                return results;\n              })()\n            ];\n          } else {\n            params.data.groups = [\n              (function() {\n                var len5, n, results;\n                results = [];\n                for (n = 0, len5 = rowKeys.length; n < len5; n++) {\n                  x = rowKeys[n];\n                  results.push(x.join(\"-\"));\n                }\n                return results;\n              })()\n            ];\n          }\n        }\n        renderArea = $(\"<div>\", {\n          style: \"display:none;\"\n        }).appendTo($(\"body\"));\n        result = $(\"<div>\").appendTo(renderArea);\n        params.bindto = result[0];\n        c3.generate(params);\n        result.detach();\n        renderArea.remove();\n        return $(\"<div>\").append(title, result);\n      };\n    };\n    return $.pivotUtilities.c3_renderers = {\n      \"Horizontal Bar Chart\": makeC3Chart({\n        type: \"bar\",\n        horizontal: true\n      }),\n      \"Horizontal Stacked Bar Chart\": makeC3Chart({\n        type: \"bar\",\n        stacked: true,\n        horizontal: true\n      }),\n      \"Bar Chart\": makeC3Chart({\n        type: \"bar\"\n      }),\n      \"Stacked Bar Chart\": makeC3Chart({\n        type: \"bar\",\n        stacked: true\n      }),\n      \"Line Chart\": makeC3Chart(),\n      \"Area Chart\": makeC3Chart({\n        type: \"area\",\n        stacked: true\n      }),\n      \"Scatter Chart\": makeC3Chart({\n        type: \"scatter\"\n      })\n    };\n  });\n\n}).call(this);\n\n//# sourceMappingURL=c3_renderers.js.map\n"]}