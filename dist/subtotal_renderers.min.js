(function(){var t,e={}.hasOwnProperty;(t=function(t){return"object"==typeof exports&&"object"==typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){var n;return n=function(n,l){var a,r,o,s,h,d,u,i,c,p,f,g,v,b,C,w,m,y,A,x,S,T,L,K,k,E,j;return m={localeStrings:{totals:"Totals"}},l=t.extend(m,l),S="▶",x="◢",f=n.colAttrs,L=n.rowAttrs,K=n.getRowKeys(),g=n.getColKeys(),j=n.tree,k=n.rowTotals,v=n.colTotals,a=n.allTotal,w=function(t,n,l,a){var r,o,s;if(o=document.createElement(t),n&&(o.className=n),null!==l&&void 0!==l&&(o.textContent=l),a)for(r in a)e.call(a,r)&&(s=a[r],o.setAttribute(r,s));return o},T=function(t,e){var n,l,a,r,o,s,h,d,u,i,c,p,f;for(s=t.length-1,o=t[0].length-1,i=[],r=[],p=w("th",e,t[0][0]),l=t[0][0],d=0,h={node:d,row:0,col:0,th:p,parent:null,children:[],descendants:o,leaves:1,flatKey:l},r[0]=h,i[0]=h,n=1;n<=o;)p=w("th",e,t[0][n]),l=l+String.fromCharCode(0)+t[0][n],++d,h={node:d,row:0,col:n,th:p,parent:i[n-1],children:[],descendants:o-n,leaves:1,flatKey:l},i[n]=h,i[n-1].children.push(h),++n;for(i[o].leaves=0,u=1;u<=s;){for(c=!0,l="",n=0;n<=o;)if(l=0===n?t[u][n]:l+String.fromCharCode(0)+t[u][n],t[u][n]===t[i[n].row][n]&&n!==o&&c)c=!0,++n;else{if(p=w("th",e,t[u][n]),++d,a={node:d,row:u,col:n,th:p,parent:null,children:[],descendants:0,leaves:1,flatKey:l},0===n)r.push(a);else for(a.parent=i[n-1],i[n-1].children.push(a),f=0;f<=n-1;)i[f].descendants=i[f].descendants+1,++f;i[n]=a,c=!1,++n}for(n=0;n<=o;)i[n].leaves=i[n].leaves+1,++n;i[o].leaves=0,++u}return r},r=function(t,e,n){var l,a,r,o,s,h;for(h=document.createElement("tr"),0!==n.length&&h.appendChild(w("th",null,null,{colspan:n.length,rowspan:f.length})),h.appendChild(w("th","pvtAxisLabel",f[0])),e[0]=h,t.appendChild(h),o=[],l=a=1,r=f.length;1<=r?a<=r:a>=r;l=1<=r?++a:--a)l<f.length&&(h=document.createElement("tr"),s=w("th","pvtAxisLabel",f[l]),h.appendChild(s),e[l]=h,t.appendChild(h),o.push(++l));return o},o=function(t,e,n,l,a,r){var s,h,d,u,i,c,p;for(u=n.children,h=0,d=u.length;h<d;h++)s=u[h],o(t,e,s,n,a,r);return p=t[n.col],c=n.th,n.col===a.length-1&&0!==r.length&&c.setAttribute("rowspan",2),0!==n.children.length&&c.setAttribute("colspan",n.descendants),p.appendChild(c),0!==n.children.length&&(i=a.length-n.col+(0!==r.length?1:0),c=w("th","pvtColLabel","",{rowspan:i}),p.appendChild(c)),n.tr=p,e.push(n)},u=function(t,e,n,l){var a,r,o,s,h;for(h=document.createElement("tr"),a=0,r=n.length;a<r;a++)o=n[a],s=w("th","pvtAxisLabel",o),h.appendChild(s);return 0!==l.length&&(s=w("th"),h.appendChild(s)),t.appendChild(h),e.tr=h},c=function(t,e,n){var a,r;return a=1,0!==e.length&&(a=e.length+(0===n.length?0:1)),r=w("th","pvtTotalLabel",l.localeStrings.totals,{rowspan:a}),t.appendChild(r)},i=function(t,e,n,l,a){var r,o,s,h,d,u,c,p;for(p=document.createElement("tr"),c=n.th,c.setAttribute("rowspan",n.descendants+1),n.col===l.length-1&&0!==a.length&&c.setAttribute("colspan",2),c.setAttribute("data-node",e.length),p.appendChild(c),0!==n.children.length&&(c.onclick=function(t){return t=t||window.event,E(e,parseInt(t.target.getAttribute("data-node")))},r=l.length-(n.col+1)+(0!==a.length?1:0),c=w("th","pvtRowLabel","",{colspan:r}),p.appendChild(c)),n.clickStatus="expanded",n.th.textContent=" "+x+" "+n.th.textContent,n.tr=p,e.push(n),t.appendChild(p),d=n.children,u=[],s=0,h=d.length;s<h;s++)o=d[s],u.push(i(t,e,o,l,a));return u},p=function(t,e){var n,l,a,r,o,s,h,d,u,i,c,p,f,g,v,b;for(i=[],o=0,h=t.length;o<h;o++){for(c=t[o],v=c.tr,r=c.flatKey,s=0,d=e.length;s<d;s++)l=e[s],a=l.flatKey,n=null!=(u=j[r][a])?u:{value:function(){return null},format:function(){return""}},b=n.value(),p="pvtVal",p=0!==l.children.length?p+" pvtSubtotal":p,p=p+" row"+c.row+" col"+l.col,f=w("td",p,n.format(b),{"data-value":b}),v.appendChild(f);g=k[r],b=g.value(),f=w("td","pvtTotal rowTotal",g.format(b),{"data-value":b,"data-row":"row"+c.row,"data-col":"col"+c.col}),i.push(v.appendChild(f))}return i},h=function(t,e){var n,a,r;return r=document.createElement("tr"),n=t.length+(0===e.length?0:1),a=w("th","pvtTotalLabel",l.localeStrings.totals,{colspan:n}),r.appendChild(a),r},s=function(t,e){var n,l,a,r,o,s,h;for(r=[],l=0,a=e.length;l<a;l++)n=e[l],s=v[n.flatKey],h=s.value(),o=w("td","pvtTotal colTotal",s.format(h),{"data-value":h,"data-for":"col"+n.col}),r.push(t.appendChild(o));return r},d=function(t,e){var n,l,r;return l=a,r=l.value(),n=w("td","pvtGrandTotal",l.format(r),{"data-value":r}),e.appendChild(n),t.appendChild(e)},b=function(t,e){var n,l,a,r,o,s,h,d;if(t[e]){for(l=t[e],h=0,a=r=1,s=l.descendants;1<=s?r<=s:r>=s;a=1<=s?++r:--r)0!==l.descendants&&(n=t[e+a],0!==n.descendants&&(d=n.th.textContent,n.th.textContent=d.substr(0,1)+S+d.substr(1+x.length)),n.clickStatus="collapsed",n.th.setAttribute("rowspan",1),"none"!==n.tr.style.display&&(++h,n.tr.style.display="none"));for(o=l.parent;null!==o;)o.th.setAttribute("rowspan",parseInt(o.th.getAttribute("rowspan"))-h),o=o.parent;return 0!==l.descendants&&(d=l.th.textContent,l.th.textContent=d.substr(0,1)+S+d.substr(1+S.length)),l.clickStatus="collapsed",l.th.setAttribute("rowspan",1),l.tr.style.display=""}},y=function(t,e){var n,l,a,r,o,s,h,d,u,i,c,p,f;if(t[e]){for(p=0,a=t[e],r=o=1,u=a.descendants;1<=u?o<=u:o>=u;r=1<=u?++o:--o)0!==a.descendants&&(l=t[e+r],0!==l.descendants&&(f=l.th.textContent,l.th.textContent=f.substr(0,1)+S+f.substr(1+x.length)),l.clickStatus="collapsed",l.th.setAttribute("rowspan",1),"none"!==l.tr.style.display&&(--p,l.tr.style.display="none"));for(i=a.children,s=0,h=i.length;s<h;s++)n=i[s],"none"===n.tr.style.display&&(++p,n.tr.style.display="");for(a.th.setAttribute("rowspan",a.children.length+1),0!==a.descendants&&(f=a.th.textContent,a.th.textContent=f.substr(0,1)+x+f.substr(1+x.length)),a.clickStatus="expanded",a.tr.style.display="",d=a.parent,c=[];null!==d;)d.th.setAttribute("rowspan",p+parseInt(d.th.getAttribute("rowspan"))),c.push(d=d.parent);return c}},E=function(t,e){if(t[e])return"collapsed"===t[e].clickStatus?y(t,e):b(t,e)},C=function(t,e){var n,l,a,r;for(l=0,a=t.length,r=[];l<a;)n=t[l],n.col===e?(b(t,n.node),r.push(l=l+n.descendants+1)):r.push(++l);return r},(A=function(t,e,n,a){var f,g,v,b,w,m,y,A,x,S,L,K,k,E,j;if(k=[],v=[],L={},K=[],g=[],f=[],0!==t.length&&(k=T(e,"pvtRowLabel")),0!==n.length&&(E=Date.now(),v=T(a,"pvtColLabel")),S=document.createElement("table"),S.className="pvtTable",0!==n.length)for(r(S,g,t),m=0,A=v.length;m<A;m++)b=v[m],o(g,f,b,null,n,t);if(0!==t.length&&(u(S,L,t,n),0===n.length&&c(L.tr,n,t)),0!==n.length&&(E=Date.now(),c(g[0],n,t)),0!==t.length)for(y=0,x=k.length;y<x;y++)b=k[y],i(S,K,b,t,n);return p(K,f),j=h(t,n),0!==n.length&&s(j,f),d(S,j),S.setAttribute("data-numrows",e.length),S.setAttribute("data-numcols",a.length),w=t.indexOf(l.collapseRowsAt),w!==-1&&w!==t.length-1&&C(K,w),S})(L,K,f,g)},t.pivotUtilities.subtotal_renderers={"Table With Subtotal":function(t,e){return n(t,e)},"Table With Subtotal Bar Chart":function(e,l){return t(n(e,l)).barchart()},"Table With Subtotal Heatmap":function(e,l){return t(n(e,l)).heatmap()},"Table With Subtotal Row Heatmap":function(e,l){return t(n(e,l)).heatmap("rowheatmap")},"Table With Subtotal Col Heatmap":function(e,l){return t(n(e,l)).heatmap("colheatmap")}}})}).call(this);
//# sourceMappingURL=subtotal_renderers.min.js.map
